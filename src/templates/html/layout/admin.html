{% extends 'layout/base.html' %}

{% include 'components/modal_confirm.html' %}

{% include 'vendas/modal_edit.html' %}
{% include 'vendas/modal_create.html' %}

{% include 'ingredientes/modal_create.html' %}
{% include 'ingredientes/modal_edit.html' %}

{% include 'estoques/modal_create.html' %}
{% include 'estoques/modal_edit.html' %}


{% include 'receitas/modal_create.html' %}
{% include 'autenticacao/modal_perfil.html' %}
{% include 'autenticacao/modal_logout.html' %}
{% include 'autenticacao/modal_atualizar_senha.html' %}

{% include 'organizacao/modal_create_usuario.html' %}
{% include 'organizacao/modal_edit_usuario.html' %}

  {% block layout %}
    <div class="page position-relative">
        {% if header.buttons %}
          <!-- Mobile Menu -->
          <div class="position-fixed d-flex flex-column align-items-end gap-2 d-lg-none" style="z-index: 1000; right: 2rem; bottom: 2rem;">
            <div class="collapse" id="collapseMenuMobile">
              <div class="card">
                <div class="d-flex flex-column align-items-end gap-2 card-body rounded p-4  shadow">
                  {% for button in header.buttons %}
                    {% if button.href %}
                      <span class="d-inline w-full">
                        <a
                        href="{{button.href}}"
                        class="{{button.classname}} w-full"
                        {% if button.attributes %}
                          {% for name, value in button.attributes.items() %}
                            {{name}} = "{{value}}"
                          {% endfor %}
                        {% endif %}
                        >
                          {% if button.symbol %}
                            {{ material_symbol(button.symbol) | safe}}
                          {% endif %}
                          {{button.content}}
                        </a>
                      </span>
                    {% else %}
                      <span class="d-inline w-full">
                        <button
                        class="{{button.classname}} w-full"
                        {% if button.attributes %}
                          {% for name, value in button.attributes.items() %}
                            {{name}} = "{{value}}"
                          {% endfor %}
                        {% endif %}
                        >
                          {% if button.symbol %}
                            {{ material_symbol(button.symbol) | safe}}
                          {% endif %}
                          {{button.content}}
                        </button>
                      </span>
                    {% endif %}
                  {% endfor %}
                </div>
              </div>
            </div>
            <button class="btn shadow" data-bs-toggle="collapse" data-bs-target="#collapseMenuMobile">
              {{ material_symbol('keyboard_arrow_up') | safe}}
              Ações
            </button>
          </div>
        {% endif %}
        <!-- Navbar -->
        <header class="navbar navbar-expand-md d-print-none">
          <div class="container-xl">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
              <a href="/home">
                <svg width="1012" height="307" viewBox="0 0 1012 307" fill="none" xmlns="http://www.w3.org/2000/svg" class="navbar-brand-image">
                  <mask id="mask0_53_20" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="438" height="307">
                  <rect width="437.492" height="306.704" fill="currentColor"/>
                  </mask>
                  <g mask="url(#mask0_53_20)">
                  <path d="M218.747 255.587C204.164 247.493 188.365 241.21 171.352 236.737C154.338 232.264 136.717 230.028 118.488 230.028C105.728 230.028 93.1955 231.199 80.8911 233.542C68.5866 235.885 56.8138 239.187 45.5727 243.446C39.1926 245.789 33.0404 245.683 27.116 243.127C21.1917 240.571 18.2295 236.844 18.2295 231.945V77.954C18.2295 75.6111 19.065 73.3748 20.736 71.2449C22.4069 69.115 24.9134 67.5176 28.2553 66.4526C42.2308 61.3409 56.8138 57.5071 72.0045 54.9512C87.1952 52.3954 102.69 51.1174 118.488 51.1174C136.109 51.1174 153.351 52.7148 170.212 55.9097C187.074 59.1045 203.252 63.8968 218.747 70.2864V224.916C234.241 218.101 250.495 212.989 267.509 209.581C284.522 206.173 301.688 204.469 319.005 204.469C329.942 204.469 340.652 205.108 351.133 206.386C361.615 207.664 372.172 209.581 382.806 212.137V58.785C387.363 59.85 391.844 60.9682 396.25 62.1396C400.655 63.311 404.984 64.7487 409.238 66.4526C412.58 67.5176 415.086 69.115 416.757 71.2449C418.428 73.3748 419.264 75.6111 419.264 77.954V231.945C419.264 236.844 416.301 240.571 410.377 243.127C404.453 245.683 398.3 245.789 391.92 243.446C380.679 239.187 368.907 235.885 356.602 233.542C344.298 231.199 331.765 230.028 319.005 230.028C300.776 230.028 283.155 232.264 266.142 236.737C249.128 241.21 233.33 247.493 218.747 255.587ZM182.289 212.456V85.9411C172.263 82.9593 161.857 80.6696 151.072 79.0722C140.287 77.4748 129.425 76.6761 118.488 76.6761C107.247 76.6761 96.3096 77.4216 85.6761 78.9125C75.0427 80.4034 64.713 82.6398 54.6871 85.6216V212.456C65.3206 209.688 75.8782 207.664 86.3597 206.386C96.8413 205.108 107.551 204.469 118.488 204.469C129.425 204.469 140.135 205.108 150.616 206.386C161.098 207.664 171.655 209.688 182.289 212.456Z" fill="currentColor"/>
                  </g>
                  <path d="M266.05 117C266.05 120.1 265.9 123.2 265.6 126.3C265.4 129.3 265.15 132.35 264.85 135.45H265.15C266.15 134.05 267.15 132.65 268.15 131.25C269.25 129.85 270.35 128.45 271.45 127.05C272.55 125.65 273.7 124.3 274.9 123L297.85 98.1H323.05L290.5 133.65L325 180H299.2L275.65 146.85L266.05 154.5V180H243.7V66H266.05V117ZM362.668 181.5C353.568 181.5 346.118 177.95 340.318 170.85C334.618 163.65 331.768 153.1 331.768 139.2C331.768 125.2 334.668 114.6 340.468 107.4C346.268 100.2 353.868 96.6 363.268 96.6C367.168 96.6 370.618 97.15 373.618 98.25C376.618 99.25 379.168 100.65 381.268 102.45C383.468 104.25 385.318 106.3 386.818 108.6H387.568C387.268 107 386.918 104.7 386.518 101.7C386.118 98.6 385.918 95.45 385.918 92.25V66H408.268V180H391.168L386.818 169.35H385.918C384.518 171.55 382.718 173.6 380.518 175.5C378.418 177.3 375.918 178.75 373.018 179.85C370.118 180.95 366.668 181.5 362.668 181.5ZM370.468 163.65C376.668 163.65 381.018 161.85 383.518 158.25C386.018 154.55 387.318 149.05 387.418 141.75V139.35C387.418 131.35 386.168 125.25 383.668 121.05C381.268 116.85 376.768 114.75 370.168 114.75C365.268 114.75 361.418 116.9 358.618 121.2C355.818 125.4 354.418 131.5 354.418 139.5C354.418 147.5 355.818 153.55 358.618 157.65C361.418 161.65 365.368 163.65 370.468 163.65ZM465.389 96.6C472.989 96.6 479.489 98.05 484.889 100.95C490.389 103.85 494.639 108.05 497.639 113.55C500.639 119.05 502.139 125.8 502.139 133.8V144.6H449.339C449.539 150.9 451.389 155.85 454.889 159.45C458.489 163.05 463.439 164.85 469.739 164.85C475.039 164.85 479.839 164.35 484.139 163.35C488.439 162.25 492.889 160.6 497.489 158.4V175.65C493.489 177.65 489.239 179.1 484.739 180C480.339 181 474.989 181.5 468.689 181.5C460.489 181.5 453.239 180 446.939 177C440.639 173.9 435.689 169.25 432.089 163.05C428.489 156.85 426.689 149.05 426.689 139.65C426.689 130.05 428.289 122.1 431.489 115.8C434.789 109.4 439.339 104.6 445.139 101.4C450.939 98.2 457.689 96.6 465.389 96.6ZM465.539 112.5C461.239 112.5 457.639 113.9 454.739 116.7C451.939 119.5 450.289 123.85 449.789 129.75H481.139C481.139 126.45 480.539 123.5 479.339 120.9C478.239 118.3 476.539 116.25 474.239 114.75C471.939 113.25 469.039 112.5 465.539 112.5ZM566.013 96.6C567.113 96.6 568.413 96.65 569.913 96.75C571.413 96.85 572.613 97 573.513 97.2L571.863 118.2C571.163 118 570.113 117.85 568.713 117.75C567.413 117.55 566.263 117.45 565.263 117.45C562.363 117.45 559.563 117.85 556.863 118.65C554.163 119.35 551.713 120.5 549.513 122.1C547.413 123.7 545.713 125.85 544.413 128.55C543.213 131.15 542.613 134.4 542.613 138.3V180H520.263V98.1H537.213L540.513 111.9H541.563C543.163 109.1 545.163 106.55 547.563 104.25C549.963 101.95 552.713 100.1 555.813 98.7C559.013 97.3 562.413 96.6 566.013 96.6ZM634.878 96.6C643.678 96.6 650.728 99 656.028 103.8C661.328 108.5 663.978 116.1 663.978 126.6V180H641.628V132.15C641.628 126.25 640.578 121.85 638.478 118.95C636.378 115.95 633.028 114.45 628.428 114.45C621.628 114.45 616.978 116.8 614.478 121.5C611.978 126.1 610.728 132.75 610.728 141.45V180H588.378V98.1H605.478L608.478 108.6H609.678C611.478 105.8 613.678 103.55 616.278 101.85C618.878 100.05 621.778 98.75 624.978 97.95C628.178 97.05 631.478 96.6 634.878 96.6ZM709.312 98.1V180H686.962V98.1H709.312ZM698.212 66C701.512 66 704.362 66.8 706.762 68.4C709.162 69.9 710.362 72.75 710.362 76.95C710.362 81.05 709.162 83.9 706.762 85.5C704.362 87.1 701.512 87.9 698.212 87.9C694.812 87.9 691.912 87.1 689.512 85.5C687.212 83.9 686.062 81.05 686.062 76.95C686.062 72.75 687.212 69.9 689.512 68.4C691.912 66.8 694.812 66 698.212 66ZM779.165 96.6C787.965 96.6 795.015 99 800.315 103.8C805.615 108.5 808.265 116.1 808.265 126.6V180H785.915V132.15C785.915 126.25 784.865 121.85 782.765 118.95C780.665 115.95 777.315 114.45 772.715 114.45C765.915 114.45 761.265 116.8 758.765 121.5C756.265 126.1 755.015 132.75 755.015 141.45V180H732.665V98.1H749.765L752.765 108.6H753.965C755.765 105.8 757.965 103.55 760.565 101.85C763.165 100.05 766.065 98.75 769.265 97.95C772.465 97.05 775.765 96.6 779.165 96.6ZM853.599 89.25C853.599 93.25 853.449 97.1 853.149 100.8C852.949 104.5 852.749 107.1 852.549 108.6H853.749C855.549 105.8 857.649 103.55 860.049 101.85C862.449 100.05 865.099 98.75 867.999 97.95C870.999 97.05 874.149 96.6 877.449 96.6C883.349 96.6 888.499 97.65 892.899 99.75C897.299 101.85 900.699 105.1 903.099 109.5C905.599 113.9 906.849 119.6 906.849 126.6V180H884.499V132.15C884.499 126.25 883.399 121.85 881.199 118.95C879.099 115.95 875.799 114.45 871.299 114.45C866.799 114.45 863.249 115.5 860.649 117.6C858.149 119.7 856.349 122.75 855.249 126.75C854.149 130.75 853.599 135.65 853.599 141.45V180H831.249V66H853.599V89.25ZM1004.23 138.9C1004.23 145.7 1003.28 151.75 1001.38 157.05C999.583 162.35 996.933 166.85 993.433 170.55C990.033 174.15 985.883 176.9 980.983 178.8C976.083 180.6 970.533 181.5 964.333 181.5C958.633 181.5 953.333 180.6 948.433 178.8C943.633 176.9 939.483 174.15 935.983 170.55C932.483 166.85 929.733 162.35 927.733 157.05C925.833 151.75 924.883 145.7 924.883 138.9C924.883 129.8 926.483 122.15 929.683 115.95C932.883 109.65 937.483 104.85 943.483 101.55C949.483 98.25 956.583 96.6 964.783 96.6C972.483 96.6 979.283 98.25 985.183 101.55C991.083 104.85 995.733 109.65 999.133 115.95C1002.53 122.15 1004.23 129.8 1004.23 138.9ZM947.683 138.9C947.683 144.3 948.233 148.85 949.333 152.55C950.533 156.15 952.383 158.9 954.883 160.8C957.383 162.6 960.633 163.5 964.633 163.5C968.633 163.5 971.833 162.6 974.233 160.8C976.733 158.9 978.533 156.15 979.633 152.55C980.833 148.85 981.433 144.3 981.433 138.9C981.433 133.5 980.833 129 979.633 125.4C978.533 121.8 976.733 119.1 974.233 117.3C971.733 115.5 968.483 114.6 964.483 114.6C958.583 114.6 954.283 116.65 951.583 120.75C948.983 124.75 947.683 130.8 947.683 138.9Z" fill="currentColor"/>
                </svg>
              </a>
            </div>
            <div class="navbar-nav flex-row order-md-last">
              <div class="d-flex me-1">
                <a href="?theme=dark" class="nav-link px-0 hide-theme-dark" data-bs-toggle="tooltip" data-bs-placement="bottom" aria-label="Enable dark mode" data-bs-original-title="Enable dark mode">
                  <!-- Download SVG icon from http://tabler-icons.io/i/moon -->
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path></svg>
                </a>
                <a href="?theme=light" class="nav-link px-0 hide-theme-light" data-bs-toggle="tooltip" data-bs-placement="bottom" aria-label="Enable light mode" data-bs-original-title="Enable light mode">
                  <!-- Download SVG icon from http://tabler-icons.io/i/sun -->
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path><path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path></svg>
                </a>
              </div>
              <div class="nav-item dropdown">
                <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown" aria-label="Open user menu">
                  <span class="avatar avatar-sm bg-warning text-white">
                    {{usuario.organizacao_descricao[0]}}
                  </span>
                  <div class="d-none d-xl-block ps-2">
                    <div>{{usuario.nome}}</div>
                    <div class="mt-1 small text-secondary">{{usuario.organizacao_descricao}}</div>
                  </div>
                </a>
                <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                  <!-- <a href="#" class="dropdown-item">Status</a> -->
                  <a data-bs-toggle="modal" data-bs-target="#modalPerfil" data-bs-payload="{{usuario.dict() | json}}" class="dropdown-item cursor-pointer">
                    {{ material_symbol('account_circle') | safe }}
                    &nbsp;
                    Meu pefil
                  </a>
                  <a data-bs-toggle="modal" data-bs-target="#modalAtualizarSenha" data-bs-payload="{{usuario.dict() | json}}" class="dropdown-item cursor-pointer">
                    {{ material_symbol('password') | safe }}
                    &nbsp;
                    Atualizar Senha
                  </a>
                  <!-- <a href="#" class="dropdown-item">Feedback</a> -->
                  <div class="dropdown-divider"></div>
                  <a href="{{url_for('get_sobre')}}" class="dropdown-item cursor-pointer">
                    {{ material_symbol('info') | safe }}
                    &nbsp;
                    Sobre o Kderninho
                  </a>
                  <div class="dropdown-divider"></div>
                  <!-- <a href="./settings.html" class="dropdown-item">Settings</a> -->
                  <a data-bs-toggle="modal" data-bs-target="#modalLogout" class="dropdown-item cursor-pointer text-danger">
                    {{ material_symbol('logout') | safe }}
                    &nbsp;
                    Sair
                  </a>
                </div>
              </div>
            </div>
          </div>
        </header>
        <header class="navbar-expand-md">
          <div class="collapse navbar-collapse" id="navbar-menu">
            <div class="navbar">
              <div class="container-xl">
                <div class="row flex-fill align-items-center">
                  <div class="col">
                    <ul class="navbar-nav">
                      {% include 'components/navbar_items.html' %}
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </header>
        <div class="page-wrapper ">
          <!-- Page header -->
          <div class="page-header d-print-none">
            <div class="container-xl">
              <div class="row g-2 align-items-center">
                <div class="col-12 col-md-auto">
                  <!-- Page pre-title -->
                  <div class="page-pretitle">
                    {{ header.pretitle }}
                  </div>
                  <h2 class="page-title">
                    {{ material_symbol(header.symbol) | safe }}
                    {{ header.title }}
                  </h2>
                  <div class="mb-1">
                    <ol class="breadcrumb" aria-label="breadcrumbs">
                      {% for breadcrumb in breadcrumbs %}
                        <li class="breadcrumb-item">
                          {% if loop.last %}
                            <a>{{breadcrumb.label | title}}</a>
                          {% else %}
                            <a href="{{breadcrumb.url}}">{{breadcrumb.label | title}}</a>
                          {% endif %}
                        </li>
                      {% endfor %}
                      {% with page = request.query_params.get('page', None) %}
                        {% if page %}
                          <li class="breadcrumb-item">
                            <a>Página {{page}}</a>
                          </li>
                        {% endif %}
                      {% endwith %}
                    </ol>
                  </div>
                </div>
                <!-- Page title actions -->
                <div class="col-auto ms-auto d-print-none d-none d-lg-block">
                  <div class="btn-list">
                    {% for button in header.buttons %}
                      {% if button.href %}
                        <span class="d-inline">
                          <a
                          href="{{button.href}}"
                          class="{{button.classname}}"
                          {% if button.attributes %}
                            {% for name, value in button.attributes.items() %}
                              {{name}} = "{{value}}"
                            {% endfor %}
                          {% endif %}
                          >
                            {% if button.symbol %}
                              {{ material_symbol(button.symbol) | safe}}
                            {% endif %}
                            {{button.content}}
                          </a>
                        </span>
                      {% else %}
                        <span class="d-inline">
                          <button
                          class="{{button.classname}}"
                          {% if button.attributes %}
                            {% for name, value in button.attributes.items() %}
                              {{name}} = "{{value}}"
                            {% endfor %}
                          {% endif %}
                          >
                            {% if button.symbol %}
                              {{ material_symbol(button.symbol) | safe}}
                            {% endif %}
                            {{button.content}}
                          </button>
                        </span>
                      {% endif %}
            
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Page body -->
          <div class="page-body mt-1 pb-5">
            <div class="container-xl">
              {% if request.query_params['error'] %}
                <div class="alert alert-danger " role="alert">
                  <div class="d-flex align-items-center gap-2">
                    {{material_symbol('error') | safe}}
                    <div>
                      <div class="text-sencodary">{{request.query_params['error'] | safe}}</div>
                    </div>
                    <a class="ms-auto cursor-pointer text-secondary" data-bs-dismiss="alert" aria-label="close">
                      {{material_symbol('close') | safe}}
                    </a>
                  </div>
                </div>
              {% endif %}
              {% if request.query_params['message'] %}
                <div class="alert alert-primary " role="alert">
                  <div class="d-flex align-items-center gap-2">
                    {{material_symbol('info') | safe}}
                    <div>
                      <div class="text-sencodary">{{request.query_params['message'] | safe}}</div>
                    </div>
                    <a class="ms-auto cursor-pointer text-secondary" data-bs-dismiss="alert" aria-label="close">
                      {{material_symbol('close') | safe}}
                    </a>
                  </div>
                </div>
              {% endif %}
              <div class="row row-deck row-cards">
                <!-- Content here -->
                {% block content %}
                {% endblock %}
              </div>
            </div>
          </div>
  {% endblock %}