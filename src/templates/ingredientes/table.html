<div class="modal" id="novoIngredienteModal" tabindex="-1">
  <form class="modal-dialog" role="document" method="POST" action="{{ url_for('post_ingredientes_index') }}">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-warning">
          <span class="material-symbols-outlined"> package_2 </span>
          Novo Ingrediente
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="datagrid">
          <div class="datagrid-item">
            <div class="datagrid-title">Nome</div>
            <input required type="text" class="form-control" name="nome" />
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">Custo</div>
            <div class="mb-3 datagrid-content">
              <div class="input-group input-group-flat">
                <span class="input-group-text"> R$ </span>
                <input name="custo" required type="number" class="form-control text-end pe-0" min="1" />
              </div>
            </div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">Peso</div>
            <div class="mb-3 datagrid-content">
              <div class="input-group input-group-flat">
                <input required type="number" name="peso" class="form-control pe-0" min="1" />
                <span class="input-group-text"> g </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn me-auto" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-success">Criar Ingrediente</button>
      </div>
    </div>
  </form>
</div>

<div class="modal" id="editarIngredienteModal" tabindex="-1">
  <form class="modal-dialog" role="document" method="POST" action="{{ url_for('post_ingredientes_editar') }}">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-warning">
          <span class="material-symbols-outlined"> package_2 </span>
          Editar Ingrediente
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="datagrid">
          <div class="datagrid-item">
            <div class="datagrid-title">ID</div>
            <input required readonly type="number" class="form-control" name="id" />
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">Nome</div>
            <input required type="text" class="form-control" name="nome" />
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">Custo</div>
            <div class="mb-3 datagrid-content">
              <div class="input-group input-group-flat">
                <span class="input-group-text"> R$ </span>
                <input name="custo" required type="number" class="form-control text-end pe-0" min="1" />
              </div>
            </div>
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">Peso</div>
            <div class="mb-3 datagrid-content">
              <div class="input-group input-group-flat">
                <input required type="number" name="peso" class="form-control pe-0" min="1" />
                <span class="input-group-text"> g </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn me-auto" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn">Atualizar</button>
      </div>
    </div>
  </form>
</div>

<div class="modal" id="deletarIngredienteModal" tabindex="-1">
  <form class="modal-dialog modal-sm" role="document" method="POST" action="{{ url_for('post_ingredientes_excluir') }}">
    <div class="modal-content">
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      <div class="modal-status bg-danger"></div>
      <div class="modal-body text-center py-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="icon mb-2 text-danger icon-lg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M12 9v2m0 4v.01" />
          <path d="M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75" />
        </svg>
        <h3>Tem certeza?</h3>
        <div class="text-secondary">Excluir ingrediente? Ele irá sumir das receitas em que está cadastrado!</div>
        <hr>
        <div class="datagrid">
          <div class="datagrid-item">
            <div class="datagrid-title">ID</div>
            <input required readonly type="number" class="form-control" name="id" />
          </div>
          <div class="datagrid-item">
            <div class="datagrid-title">Nome</div>
            <input required readonly type="text" class="form-control" name="nome" />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="w-100">
          <div class="row">
            <div class="col"><a href="#" class="btn w-100" data-bs-dismiss="modal"> Cancelar </a></div>
            <div class="col">
              <button type="submit" class="btn btn-danger w-100">Excluir Ingrediente</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<div class="col-12">
  <div class="card">
    <div class="card-header">
      <h5 class="card-title text-warning">
        <span class="material-symbols-outlined"> package_2 </span>
        Ingredientes
      </h5>
      <div class="ms-auto">
        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#novoIngredienteModal">
          <span class="material-symbols-outlined me-1">add</span>
          Novo Ingrediente
        </button>
      </div>
    </div>
    <div class="card-body">
      Ingredientes são utilizados em <kbd>Receitas</kbd> para calcular o custo, faturamento, preço sugerido e lucro.
      <br>
      É necessário cadastrar um ingrediente para poder utiliza-lo em uma receita.
    </div>
    <div class="table-responsive">
      <table class="table table-vcenter">
        <thead>
          <tr>
            <th>#</th>
            <th>Nome</th>
            <th>Custo (R$)</th>
            <th>Peso (g)</th>
            <th>Custo/grama (R$)</th>
            <th class="w-1"></th>
          </tr>
        </thead>
        <tbody>
          {% for ingrediente in ingredientes %}
          <tr>
            <td>{{ ingrediente.id }}</td>
            <td>{{ ingrediente.nome }}</td>
            <td>R$ {{ ingrediente.custo }}</td>
            <td>{{ ingrediente.peso }} g</td>
            <td>R$ {{ ingrediente.custo_p_grama }}</td>
            <td style="display: flex; gap: 0.5rem">
              <a class="btn btn-sm" data-bs-toggle="modal" data-bs-target="#editarIngredienteModal" data-bs-payload="{{ingrediente.model_dump_json()}}">Editar</a>
              <a class="btn btn-sm btn-ghost-danger" data-bs-toggle="modal" data-bs-target="#deletarIngredienteModal" data-bs-payload="{{ingrediente.model_dump_json()}}">Excluir</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

